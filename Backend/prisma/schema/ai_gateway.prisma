
model AiGatewayRequest {
  id              String   @id @default(cuid())
  userId          String
  apiKeyId        String?
  model           String
  provider        String
  promptTokens    Int      @default(0)
  completionTokens Int     @default(0)
  totalTokens     Int      @default(0)
  creditsUsed     Int      @default(0)
  latencyMs       Int      @default(0)
  streaming       Boolean  @default(false)
  cached          Boolean  @default(false)
  status          AiGatewayStatus @default(SUCCESS)
  errorCode       String?
  errorMessage    String?
  ipAddress       String?
  userAgent       String?
  requestMetadata Json?
  createdAt       DateTime @default(now())
  user            User     @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([userId])
  @@index([apiKeyId])
  @@index([model])
  @@index([provider])
  @@index([status])
  @@index([createdAt])
  @@index([userId, createdAt])
  @@index([userId, model])
}
