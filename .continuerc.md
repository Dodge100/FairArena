# FairArena - Continue.dev Context

## Project Overview

**FairArena** - Production skill assessment platform
**Live:** https://www.fairarena.app
**License:** Proprietary
**Author:** Saksham Goel

## Tech Stack

**Frontend:**

- React 19.2 + TypeScript 5.9 (strict)
- Vite 7.3, TailwindCSS 4.1
- Clerk Auth, Radix UI, Shadcn
- React Router v7, Axios
- Socket.IO, React Hook Form, Zod

**Backend:**

- Node.js 20, Express 5.2, TypeScript 5.9
- Prisma 7.2 (PostgreSQL 15+)
- Clerk JWT, Inngest (34+ jobs)
- Redis (Upstash), Resend
- Gemini AI, Razorpay
- OpenTelemetry, Arcjet

**Infra:**

- Docker + Compose
- Caddy + Cloudflare
- Azure (Blob, Key Vault)
- pnpm 10.26

## Architecture

**API:** RESTful, 70+ endpoints (`/api/v1/*`)
**Database:** 30+ Prisma models (RBAC, audit logs, soft deletes)
**Cache:** Redis (sessions, rate limits, data)
**Jobs:** Inngest event-driven
**Auth:** Clerk webhooks
**Monitoring:** OpenTelemetry → SigNoz

## Structure

```
Backend/src/
├── config/           # Configs (8)
├── controllers/v1/   # Handlers (31)
├── email/templates/  # React Email (19)
├── inngest/v1/       # Jobs (34+)
├── middleware/       # Auth, security (8)
├── routes/v1/        # Routes (17)
├── services/v1/      # Business logic
├── utils/            # Helpers
└── index.ts          # Entry

Frontend/src/
├── components/       # UI (61)
├── pages/            # Pages (27)
├── contexts/         # Contexts (7)
├── hooks/            # Hooks
└── services/         # API

prisma/
└── schema.prisma     # 30+ models
```

## Key Models

User, Profile, Settings
Organization → Team → Project (RBAC)
Payment, CreditTransaction, Plan
Notification, Support, Feedback
Audit logs, Invite codes

## Code Standards

### TypeScript

```typescript
// ✅ Strict types
interface UserProfile {
  userId: string;
  bio: string;
}

// ❌ No any
function bad(x: any): any {}
```

### React

```tsx
interface Props {
  userId: string;
}

export const Card: FC<Props> = ({ userId }) => {
  const [user, setUser] = useState<User | null>(null);

  useEffect(() => {
    loadUser();
  }, [userId]);

  return user ? <div>{user.name}</div> : <Spinner />;
};
```

### API

```typescript
import { z } from 'zod';

const schema = z.object({ email: z.string().email() });

export const handler = async (req: Request, res: Response) => {
  try {
    const data = schema.parse(req.body);
    const result = await service.execute(data);
    return res.json({ success: true, data: result });
  } catch (error) {
    logger.error('Error', { error });
    return res.status(500).json({ success: false, error: 'Error' });
  }
};
```

### Database

```typescript
// Transactions
await prisma.$transaction(async (tx) => {
  await tx.payment.update({ ... });
  await tx.creditTransaction.create({ ... });
});

// Optimize
const user = await prisma.user.findUnique({
  where: { userId },
  select: { id: true, email: true }
});
```

### Cache

```typescript
import { redis } from '@/config/redis';

// Get/Set
const data = (await redis.get(key)) ?? (await db());
await redis.set(key, JSON.stringify(data), 'EX', 3600);

// Invalidate
await redis.del(key);
```

### Jobs

```typescript
import { inngest } from '@/inngest/client';

export const job = inngest.createFunction(
  { id: 'name' },
  { event: 'event/name' },
  async ({ event, step }) => {
    await step.run('step1', async () => {
      /* ... */
    });
  },
);
```

## Patterns

**Forms:** React Hook Form + Zod
**Validation:** Zod (client + server)
**Error Handling:** Try-catch + Winston logging
**Authentication:** Clerk JWT on protected routes
**Rate Limiting:** Arcjet on public routes
**Caching:** Redis with TTL + invalidation
**Transactions:** Prisma for multi-table writes

## Environment

**Backend:** DATABASE_URL, CLERK_SECRET_KEY, CLERK_WEBHOOK_SECRET, INNGEST_SIGNING_KEY, INNGEST_EVENT_KEY, UPSTASH_REDIS_REST_URL, UPSTASH_REDIS_REST_TOKEN, RESEND_API_KEY, RAZORPAY_KEY_ID, RAZORPAY_KEY_SECRET, GOOGLE_GEMINI_API_KEY

**Frontend:** VITE_CLERK_PUBLISHABLE_KEY, VITE_API_BASE_URL, VITE_SOCKET_URL, VITE_RAZORPAY_KEY_ID

## Rules

1. TypeScript strict (no `any`)
2. Zod validation (all inputs)
3. Prisma transactions (multi-table)
4. Redis caching (TTL + invalidation)
5. Winston logging (no secrets)
6. Try-catch (all async)
7. Clerk JWT (protected routes)
8. Arcjet (rate limiting)
9. Sentry (error tracking)
10. Idempotency (payments)

## Development

```bash
pnpm install
cd Backend && pnpm db:generate && pnpm db:migrate

# Run
cd Backend && pnpm dev           # :3000
cd Backend && pnpm dev:inngest   # :8288
cd Frontend && pnpm dev          # :5173

# Docker
docker compose up -d
```

## Naming

- Files: camelCase (utils), PascalCase (components)
- Functions: camelCase
- Constants: UPPER_SNAKE_CASE
- Types: PascalCase

## API Endpoints

```
/api/v1/profile          - Profile CRUD
/api/v1/credits          - Balance, history
/api/v1/payments         - Razorpay
/api/v1/organizations    - Org management
/api/v1/teams            - Team management
/api/v1/ai               - AI chat
/api/v1/notifications    - Notifications
/api/v1/support          - Tickets
/healthz                 - Health
```

## Resources

- Swagger: http://localhost:3000/api-docs
- Postman: Backend/postman/
- Docs: Backend/docs/
- Support: support@fairarena.app

---

**Author:** @Saksham-Goel1107
